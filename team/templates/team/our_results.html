{% extends 'team/base.html' %}
{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —Ç–∞–±–ª–∏—Ü–∞ ‚Äî {{ season.name }}{% endblock %}

{% block content %}
<h1>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ —Ç—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: {{ season.name }}</h1>

{% if error %}
    <div style="background: #ffebee; color: #c62828; padding: 15px; border-radius: 6px; margin: 20px 0;">
        {{ error }}
    </div>
{% endif %}

<!-- === –ë–ª–æ–∫: –ù–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã === -->
<h2 style="margin-top: 2rem;">–ù–∞—à–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>

<div style="display: flex; flex-wrap: wrap; gap: 20px; margin: 20px 0 30px;">
    <div style="background: #e30613; color: white; padding: 20px; border-radius: 10px; text-align: center; flex: 1; min-width: 140px;">
        <div style="font-size: 14px; opacity: 0.9;">–ú–∞—Ç—á–µ–π —Å—ã–≥—Ä–∞–Ω–æ</div>
        <div style="font-size: 32px; font-weight: bold;">{{ stats.played }}</div>
    </div>
    <div style="background: #0033a0; color: white; padding: 20px; border-radius: 10px; text-align: center; flex: 1; min-width: 140px;">
        <div style="font-size: 14px; opacity: 0.9;">–ü–æ–±–µ–¥</div>
        <div style="font-size: 32px; font-weight: bold;">{{ stats.wins }}</div>
    </div>
    <div style="background: #f8f9fa; border: 2px solid #e30613; color: #e30613; padding: 20px; border-radius: 10px; text-align: center; flex: 1; min-width: 140px;">
        <div style="font-size: 14px;">–ù–∞–±—Ä–∞–Ω–æ –æ—á–∫–æ–≤</div>
        <div style="font-size: 32px; font-weight: bold;">{{ stats.points }}</div>
    </div>
</div>

<div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 30px; text-align: center;">
    <strong>–°–µ—Ç—ã:</strong> {{ stats.sets_won }} : {{ stats.sets_lost }}
</div>

{% if matches %}
<div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
        <tr style="background: #0033a0; color: white;">
            <th style="padding: 12px; text-align: left;">–î–∞—Ç–∞</th>
            <th style="padding: 12px; text-align: left;">–°–æ–ø–µ—Ä–Ω–∏–∫</th>
            <th style="padding: 12px; text-align: center;">–°—á—ë—Ç</th>
            <th style="padding: 12px; text-align: center;">–û—á–∫–∏</th>
            <th style="padding: 12px; text-align: center;">–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
        </tr>
        </thead>
        <tbody>
        {% for match in matches %}
        <tr style="border-bottom: 1px solid #eee;">
            <td style="padding: 12px; text-align: left;">{{ match.date|date:"d E Y" }}</td>
            <td style="padding: 12px; text-align: left;">{{ match.opponent.name }}</td>
            <td style="padding: 12px; text-align: center; font-weight: bold;">
                {{ match.sets_home }}:{{ match.sets_away }}
            </td>
            <td style="padding: 12px; text-align: center;">{{ match.points }}</td>
            <td style="padding: 12px; text-align: center;">
                {% if match.is_win %}
                <span style="color: #28a745; font-weight: bold;">–ü–æ–±–µ–¥–∞</span>
                {% else %}
                <span style="color: #dc3545;">–ü–æ—Ä–∞–∂–µ–Ω–∏–µ</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p>–ú–∞—Ç—á–µ–π –ø–æ–∫–∞ –Ω–µ —Å—ã–≥—Ä–∞–Ω–æ.</p>
{% endif %}

<!-- === –ë–ª–æ–∫: –¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ === -->
<h2 style="margin-top: 3rem;">–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞</h2>

{% if iskra_standing %}
<div style="background: linear-gradient(90deg, #e30613, #0033a0); color: white; padding: 15px; border-radius: 8px; text-align: center; margin-bottom: 25px; font-size: 18px;">
    üí• ¬´–ò–°–ö–†–ê¬ª –Ω–∞ <strong>{{ iskra_standing.position }}-–º –º–µ—Å—Ç–µ</strong> —Å {{ iskra_standing.points }} –æ—á–∫–∞–º–∏!
</div>
{% endif %}

{% if standings %}
<div style="overflow-x: auto;">
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
        <tr style="background: #333; color: white;">
            <th style="padding: 12px; text-align: center;">#</th>
            <th style="padding: 12px; text-align: left;">–ö–æ–º–∞–Ω–¥–∞</th>
            <th title="–ò–≥—Ä—ã" style="padding: 12px; text-align: center;">–ò</th>
            <th title="–ü–æ–±–µ–¥—ã" style="padding: 12px; text-align: center;">–í</th>
            <th title="–ü–æ—Ä–∞–∂–µ–Ω–∏—è" style="padding: 12px; text-align: center;">–ü</th>
            <th title="–°–µ—Ç—ã" style="padding: 12px; text-align: center;">–°–µ—Ç—ã</th>
            <th title="–û—á–∫–∏" style="padding: 12px; text-align: center;">–û</th>
        </tr>
        </thead>
        <tbody>
        {% for team in standings %}
        <tr style="
            border-bottom: 1px solid #eee;
            {% if '–ò–°–ö–†–ê' in team.team_name.upper %}background: rgba(227, 6, 19, 0.05); font-weight: bold; color: #e30613;{% endif %}
            ">
            <td style="padding: 12px; text-align: center;">{{ team.position }}</td>
            <td style="padding: 12px; text-align: left;">{{ team.team_name }}</td>
            <td style="padding: 12px; text-align: center;">{{ team.played }}</td>
            <td style="padding: 12px; text-align: center;">{{ team.wins }}</td>
            <td style="padding: 12px; text-align: center;">{{ team.losses }}</td>
            <td style="padding: 12px; text-align: center;">{{ team.sets_won }}:{{ team.sets_lost }}</td>
            <td style="padding: 12px; text-align: center;">{{ team.points }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<p>–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–∫–∞ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞.</p>
{% endif %}

<p style="margin-top: 30px; color: #666; font-style: italic;">
    üìå –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∞—Ç—á–µ–π –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ ‚Äî –≤—Ä—É—á–Ω—É—é –ø–æ –¥–∞–Ω–Ω—ã–º –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤.
</p>
{% endblock %}